<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/boxicons/2.0.7/css/boxicons.min.css">

<body>
 <!-- <p class="title">Most Borrowed Books</p> -->

 
<div class="container">
  <p class="title">Most Borrowed Books</p>
    <!-- filter -->

    <div class="filter-container">
      <div class="filter-options">
        <div class="filter-group">
          <label for="department">Department:</label>
          <select id="department" [(ngModel)]="selectedDepartment" (change)="onDepartmentChange()">
            <option value="">All Departments</option>
            <option *ngFor="let dept of departments" [value]="dept">{{ dept }}</option>
          </select>
        </div>
        <div class="filter-group" *ngIf="selectedDepartment">
          <label for="secondFilter">Program:</label>
          <select id="secondFilter" [(ngModel)]="selectedSecondFilter">
            <option value="">All Options</option>
            <option *ngFor="let option of secondFilterOptions[selectedDepartment]" [value]="option">{{ option }}</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="startDate">From:</label>
          <input type="date" id="startDate" min="2024-01-01">
        </div>
        <div class="filter-group">
          <label for="endDate">To:</label>
          <input type="date" id="endDate" min="2024-01-01">
        </div>
      </div>
    </div>


    <!-- Print button -->
    <div class="parent-container">
      <div class="menu-container">
        <button mat-icon-button [matMenuTriggerFor]="menu" class="menu-button">
          <span class="tab-link-icon1"> <i class='bx bx-printer'></i> </span>
          <span class="download-text">Download</span>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="downloadPNG()">
           <span class="download-text1">Save as PNG</span>
          </button>
          <button mat-menu-item (click)="downloadPDF()">
           <span class="download-text1">Save as PDF</span>
          </button>
          <!-- <button mat-menu-item (click)="downloadPDF()">
           <span class="download-text1">Save as XSLX</span>
          </button> -->

          <!-- <button mat-menu-item (click)="downloadFile('svg')">
            <mat-icon>image</mat-icon> Download SVG
          </button>
          <button mat-menu-item [disabled]="isProgramChartVisible" (click)="downloadPDF()">
            <mat-icon>picture_as_pdf</mat-icon> Download PDF
          </button> -->
        </mat-menu>
      </div>
    </div>
<hr>
  
  <!-- chart for most borrowed books -->
<app-loadings class="loading" *ngIf="isLoading"></app-loadings>
  
  <div style="display: flex; justify-content: space-around;">
    <div style="width: 60%;">
      <canvas id="mostChart" ></canvas>
    </div>
  </div>
 

 
  <div class="table">
          
    <table mat-table [dataSource]="dataSource" *ngIf="!isLoading">
      
      <!-- Name Column -->
      <ng-container matColumnDef="Accession Number">
        <th mat-header-cell *matHeaderCellDef class="tbl-head"> Accession Number </th>
        <td mat-cell *matCellDef="let element"></td>
      </ng-container>
  
      <!-- Gender Column -->
      <ng-container matColumnDef="Location">
        <th mat-header-cell *matHeaderCellDef class="tbl-head"> Location </th>
        <td mat-cell *matCellDef="let element"> {{element.gender}} </td>
      </ng-container>
  
      <!-- Email Column -->
      <ng-container matColumnDef="Book Title">
        <th mat-header-cell *matHeaderCellDef class="tbl-head"> Book Title </th>
        <td mat-cell *matCellDef="let element"> {{element.email}} </td>
      </ng-container>
  
      <!-- Department Column -->
      <ng-container matColumnDef="Publisher">
        <th mat-header-cell *matHeaderCellDef class="tbl-head"> Publisher </th>
        <td mat-cell *matCellDef="let element"> {{element.department}} </td>
      </ng-container>

      <!-- Program Column -->
      <ng-container matColumnDef="Date Published">
        <th mat-header-cell *matHeaderCellDef class="tbl-head"> Date Published </th>
        <td mat-cell *matCellDef="let element"> {{element.department}} </td>
      </ng-container>

      <!-- Action Column -->
      <ng-container matColumnDef="Borrow Count">
        <th mat-header-cell *matHeaderCellDef class="tbl-head"> Borrow Count </th>
        <td mat-cell *matCellDef="let element"> 

        </td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator class="page" [pageSizeOptions]="[10, 15]"
                        showFirstLastButtons
                        aria-label="Select page of users">
          </mat-paginator>

  </div>
</div>
</body>
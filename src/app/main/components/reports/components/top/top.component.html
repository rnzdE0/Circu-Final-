<main>
  
  <div class="container">
    <p class="title">Top 10 Borrowers</p>
 
  <!-- filter -->
 
  <div class="filter-container">
   <div class="filter-options">
     <div class="filter-group">
       <label for="department">Department:</label>
       <select id="department" [(ngModel)]="selectedDepartment" (change)="onDepartmentChange()">
         <option value="">All Departments</option>
         <option *ngFor="let dept of departments" [value]="dept">{{ dept }}</option>
       </select>
     </div>
     <div class="filter-group" *ngIf="selectedDepartment">
       <label for="secondFilter">Program:</label>
       <select id="secondFilter" [(ngModel)]="selectedSecondFilter">
         <option value="">All Options</option>
         <option *ngFor="let option of secondFilterOptions[selectedDepartment]" [value]="option">{{ option }}</option>
       </select>
     </div>
     <div class="filter-group">
       <label for="startDate">From:</label>
       <input type="date" id="startDate" min="2024-01-01">
     </div>
     <div class="filter-group">
       <label for="endDate">To:</label>
       <input type="date" id="endDate" min="2024-01-01">
     </div>
   </div>
 </div>
 
 
     <div class="parent-container">
       <div class="menu-container">
         <button mat-icon-button [matMenuTriggerFor]="menu" class="menu-button">
          <span class="tab-link-icon1"> <i class='bx bx-printer'></i> </span>
           <span class="download-text">Download</span>
         </button>
         <mat-menu #menu="matMenu">
           <button mat-menu-item (click)="downloadPNG()">
            <span class="download-text1">Save as PNG</span>
           </button>
           <button mat-menu-item (click)="downloadPDF()">
            <span class="download-text1">Save as PDF</span>
           </button>
         </mat-menu>
       </div>
     </div>
 
     <hr>

     <app-loadings class="loading" *ngIf="isLoading"></app-loadings>

       <!-- chart for most top 10 book borrower -->
    <div style="display: flex; justify-content: space-around;">
      <div style="width: 80%;" >
        <canvas id="topChart" ></canvas>
      </div>
    </div>

 <!-- <app-loadings class="loading" *ngIf="isLoading"></app-loadings> -->
  
 <div class="table">
          
  <table mat-table [dataSource]="dataSource" *ngIf="!isLoading">

        <ng-container matColumnDef="Name">
          <th mat-header-cell *matHeaderCellDef class="tbl-head"> Name </th>
          <td mat-cell *matCellDef="let element">{{element.first_name}}  {{element.last_name}} </td>
        </ng-container>

        <!-- uncomment if needed -->
        <ng-container matColumnDef="ID">
          <th mat-header-cell *matHeaderCellDef class="tbl-head"> ID Number </th>
          <td mat-cell *matCellDef="let element"> {{element.user_id}} </td>
        </ng-container>

        <ng-container matColumnDef="department">
          <th mat-header-cell *matHeaderCellDef class="tbl-head"> Department </th>
          <td mat-cell *matCellDef="let element"> Missing data </td>
        </ng-container>

        <ng-container matColumnDef="program">
          <th mat-header-cell *matHeaderCellDef class="tbl-head"> Program </th>
          <td mat-cell *matCellDef="let element"> Missing data </td>
        </ng-container>

        <ng-container matColumnDef="Borrow Count">
          <th mat-header-cell *matHeaderCellDef class="tbl-head"> Borrow Count </th>
          <td mat-cell *matCellDef="let element">{{element.borrow_count}}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    
    
      <mat-paginator class="page" [pageSizeOptions]="[3, 5, 10, 15]"
            showFirstLastButtons
            aria-label="Select page of users">
      </mat-paginator>
   </div>
 </div>
 </main>
 